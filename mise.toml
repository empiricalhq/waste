[settings]
python.uv_venv_auto = true

[tools]
bun = "1.3.1"
uv = "0.9.6"
ruff = "0.14.2"
biome = "2.3.2"

[tasks.install]
description = "Install dependencies"
alias = "i"
run = "uv --project datasets sync"

[tasks.update]
description = "Update all dependencies"
alias = "u"
run = "uv --project datasets sync -U"

[tasks.outdated]
description = "List outdated dependencies"
alias = "o"
run = "uv pip list --outdated"

[tasks.export]
description = "Export deps to requirements.txt"
run = "uv export --project datasets --format requirements-txt --no-hashes --no-header --no-dev --no-annotate --output-file datasets/requirements.txt"

[tasks.fix]
description = "Lint & format (fix by default)"
alias = "f"
run = [
  "uv run --project datasets ruff format . --config datasets/pyproject.toml",
  "uv run --project datasets ruff check --fix --unsafe-fixes . --config datasets/pyproject.toml",
]

[tasks.dev]
description = "Run development server"
alias = "d"
run = "uv run --project datasets marimo edit datasets/src/03-lima-population-map.py"

[tasks.dev-lan]
description = "Run development server (LAN)"
alias = "dl"
run = "uv run --project datasets marimo edit datasets/src/main.py --host 0.0.0.0"
